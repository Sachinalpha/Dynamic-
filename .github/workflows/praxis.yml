name: Manual Praxis Test

on:
  workflow_dispatch:

jobs:
  run-praxis-agent:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Install node-fetch
        run: npm install node-fetch@2

      - name: Run Praxis Agent
        env:
          PRAXIS_AGENT_ID: ${{ secrets.PRAXIS_AGENT_ID }}
          PRAXIS_API_TOKEN: ${{ secrets.PRAXIS_API_TOKEN }}
        run: |
          node <<'JS'
          const fetch = require('node-fetch');

          const agentId = process.env.PRAXIS_AGENT_ID;
          const apiKey = process.env.PRAXIS_API_TOKEN;

          if (!agentId || !apiKey) {
            console.error("ERROR: Agent ID or API token is missing!");
            process.exit(1);
          }

          fetch(`https://api.praxis.ai/v1/agent/${agentId}/run`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${apiKey}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ input: 'Hello World' })
          })
          .then(res => res.json())
          .then(data => console.log('Agent Response:', data))
          .catch(err => console.error('Error:', err));
          JS

